# 피그마 이미지 리사이저 플러그인 사용자 흐름

## 1. 진입
1. 디자이너가 피그마에서 이미지 또는 프레임 선택
2. 플러그인 패널 열기 (`Plugins → Image Resizer`)

## 2. 초기 스캔 & 데이터 로딩
1. 플러그인에서 현재 선택 노드를 스캔
2. 유효 노드 여부 판단  
   - 이미지/프레임이 아니면 가이드 메시지 표시
3. 노드 메타 데이터 로딩  
   - 폭/높이, 스케일, export 가능 포맷 수집

## 3. 사이즈 & 용량 미리보기 설정
1. 사용자 입력
   - 포맷(기본 PNG), 스케일(1x), 배경 투명 여부
2. 예상 용량 계산 결과 표시  
   - 빠른 추정 → 즉시 숫자 업데이트  
   - 정밀 계산 버튼 → 실제 encode 진행, 결과 표시
3. 비교 정보  
   - `현재 예상 용량 vs 최적화 목표 용량`, 막대/게이지 시각화

## 4. 품질 조정 및 실시간 미리보기
1. 품질 슬라이더 조작 (JPG/WebP 품질 0~1)
2. Canvas 미리보기 업데이트  
   - 기본 썸네일 → 필요 시 원본 보기 토글
3. 용량 갱신  
   - 실시간 encode 결과 바이트 수 표시  
   - 절감율 % 출력
4. 히스토리/프리셋  
   - 최근 5개 품질·용량 저장  
   - “고화질/균형/초경량” 버튼 제공

## 5. Export / 설정 저장
1. **Export 버튼**
   - 지정 포맷/품질/스케일로 export  
   - 성공 시 완료 토스트, 파일 저장 경로 안내
2. **설정 저장**
   - 프로젝트/파일 단위로 프리셋 저장  
   - 다음 사용 시 기본값으로 로드

## 6. 예외 처리
- 선택 노드 없음 → “노드를 선택하세요” overlay
- 4K 이상 원본 → 성능 경고 및 진행 여부 확인
- encode 실패 → 재시도 또는 포맷 변경 안내

## 7. 종료
1. 사용자가 패널 닫기 또는 다른 노드 선택
2. 플러그인은 상태 초기화, 다음 노드에 맞춰 재로딩

---
- **핵심 경험 목표**: 패널 하나에서 사이즈 확인 → 품질 조정 → export까지 1분 내 완료
- **주요 터치포인트**: 노드 선택, 옵션 입력, 품질 슬라이더, 미리보기 패널, export 버튼

