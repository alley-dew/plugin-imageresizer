# 피그마 이미지 리사이저 플러그인 PRD

## 1. 개요
- **목적**: 피그마에서 추출되는 이미지의 파일 용량을 최소화하면서 시각적 품질을 유지하도록 지원하는 플러그인 제공
- **핵심 가치**: 디자이너가 피그마 내에서 바로 이미지 사이즈와 품질을 확인·조정하여 반복적인 export-test 과정을 줄이고, 최적화된 자산을 빠르게 확보
- **대상 사용자**: 대규모 디자인 시스템 운영자, 웹/모바일 UI 디자이너, 퍼블리셔

## 2. 문제 정의
1. 피그마 기본 export 패널만으로는 이미지가 실제 어느 정도 용량이 될지 직전까지 예측하기 어렵다.
2. 품질을 낮춰도 시각적으로 큰 차이가 없는지 export 후 외부 툴에서 확인해야 하므로 작업 흐름이 비효율적이다.

## 3. 목표
- **G1: 미리보기 정확도** – 선택한 노드의 실제 픽셀 크기와 예상 용량을 플러그인에서 즉시 확인 (±10% 오차 이내)
- **G2: 최적화 효율** – 품질 슬라이더로 즉시 시각적 차이를 비교하며 용량을 30% 이상 절감
- **G3: 작업 속도** – 플러그인 사용 시 이미지 최적화 완료까지 평균 1분 이내

## 4. 주요 기능
### 4.1 사이즈 & 용량 미리보기
- **선택 노드 파싱**: 현재 선택된 프레임/컴포넌트/이미지 노드의 폭·높이·스케일 정보를 불러온다.
- **Export 설정 입력**: 포맷(PNG/JPEG/WebP), 스케일(@0.5x~@4x), 백그라운드 투명 여부 선택.
- **용량 산출**:
  - 빠른 추정: `width × height × 채널 × 압축 계수` 기반 산식
  - 정밀 모드: 캔버스로 래스터라이즈 후 실제 encode, 결과 byte 길이 표시
- **UI 표시 요소**:
  - 픽셀 크기, DPI(옵션), 예상 용량, 기존 vs 최적화 후 비교 막대
  - 경고: 선택 노드가 이미지가 아닐 경우 안내

### 4.2 품질 조절 실시간 미리보기
- **품질 슬라이더**: JPG/WebP 품질 0~1, PNG 압축 레벨 0~9
- **캔버스 미리보기**: encode 결과를 Base64로 UI에 렌더링하여 즉시 비교
- **썸네일/원본 토글**: 성능 이슈를 줄이기 위해 기본은 1024px 이하 썸네일, 필요 시 원본 보기
- **용량 변화 그래프**: 최근 5개 품질 포인트의 용량/품질을 라인 차트로 시각화
- **프리셋**: “고화질”, “균형”, “초경량” 등 미리 정의된 품질값 제공

## 5. 사용자 흐름
1. 사용자가 피그마에서 대상 노드를 선택 → 플러그인 실행
2. 플러그인이 노드 정보를 읽어 기본 사이즈/용량 추정을 수행
3. 사용자가 포맷/스케일을 조정하면 예상 용량이 즉시 갱신
4. 품질 슬라이더를 움직이면 미리보기와 용량 값이 실시간으로 갱신
5. 만족하는 품질/용량 조합을 선택한 뒤 “Export” 또는 “설정 저장” 실행

## 6. 기술 고려 사항
- **플러그인 구조**: 피그마 Plugin API + iframe UI (HTML/CSS/TS)
- **렌더링**: `figma.createImageAsync`로 이미지 데이터를 받아 UI에서 `<canvas>` 처리
- **성능**:
  - 비동기 encode, debounce(150ms) 적용
  - 큰 이미지(>4096px)는 경고 및 원본 보기 시 진행 상황 표시
- **정확도**: 실제 encode 기반 용량 측정은 Web Worker 사용 고려
- **다국어**: 초기 버전은 한국어, 추후 영어 로캘 확장 대비

## 7. 성공 지표
- 플러그인 사용 후 export 파일 평균 용량 30% 이상 감소
- 사용자 설문에서 “작업 시간 단축” 항목 4/5 이상
- 주간 활성 사용자(WAU) 50명 달성 (베타 기준)

## 8. 향후 확장 아이디어
- 배치 최적화: 여러 노드를 한번에 encode/export
- 자동 프리셋 추천: 이미지 콘텐츠(사진, 아이콘 등) 분석 후 최적 품질 값 제안
- 버전 비교: 기존 export 자산과 직접 비교하는 diff 뷰

